usage() { echo "Usage: $0 [-p src_dir] [-d dst_dir]" 1>&2; exit 1; }

while getopts p:d: flag
do
    case "${flag}" in
        p) p=${OPTARG};;
        d) d=${OPTARG};;
        *) usage;;
    esac
done

if [ -z "${p}" ] || [ -z "${d}" ]; then
    usage
fi

echo "[+] Starting process"
cnt=0
rm -rf $d 1> /dev/null
mkdir $d 1> /dev/null
for x in $(ls -I "*.sh" -I "$d" $p); do
    if [[ $(($cnt % 2)) -eq 0 ]]; then
    mv $p/$x $d
    fi 
    cnt=$((cnt+1))
done
echo "[+] Created a new dir named 'reduced/' with half of the files"